on: [pull_request, push]
name: Hata kontrolÃ¼ ve lint
jobs:
  lint:
    name: pylint
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.10'
      - name: Install dependencies
        shell: bash
        run: |
          python -m pip install --upgrade pip
          if [ -f requirements.txt ]; then grep -v py7zr requirements.txt > req2.txt && pip install -r req2.txt; fi
          if [ -f requirements-gui.txt ]; then pip install -r requirements-gui.txt; else pip install PyQt6; fi
          pip install pylint
      - name: Run pylint (critical errors only)
        shell: bash
        run: |
          shopt -s globstar
          pylint --ignored-modules py7zr -E **/*.py || true
      - name: Run pylint (package critical issues)
        shell: bash
        run: |
          pylint --ignored-modules py7zr turkanime_api/ || true
      - name: Run pylint (duplicate code check)
        shell: bash
        run: |
          if [ -f turkanime.py ]; then pylint --ignored-modules py7zr turkanime.py --disable=all --enable=duplicate-code || true; fi
